<div class="portfolio-grid">
  {{ $type := .type }}
  {{ range sort (where .pages "Type" $type) "Params.year" "desc" }}
  <div class="portfolio-item">
    <a href="{{ .Permalink }}">
      <div class="image-wrapper">
        {{ $image := resources.Get .Params.cover }}
        {{ if $image }}
        {{ $resized := $image.Resize "500x" }}
        <img src="{{ $resized.Permalink }}" alt="Cover image for {{ .Params.title }}">
        {{ else }}
        <img src="/path/to/default/image.jpg" alt="Cover image for {{ .Params.title }}">
        {{ end }}
      </div>
    </a>
    <div class="portfolio-description">
      <a href="{{.Permalink }}">
        <h4 class="portfolio-grid-title">{{.Params.title}} ({{.Params.year}})</h4>
      </a>
      {{ .Params.description }}
    </div>
  </div>
  {{ end }}
</div>
